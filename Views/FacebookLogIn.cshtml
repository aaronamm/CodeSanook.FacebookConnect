@using Orchard.ContentManagement
@using Codesanook.Configuration.Models

@{
    Script.Require("React").AtHead();
    Script.Require("ReactDOM").AtHead();
    Script.Include("facebook-connect.js").AtHead();

    // Dynamic add shape template and its shape model for Facebook SDK if not exist
    var shapeItems = WorkContext.Layout.AfterBody.Items as IEnumerable<dynamic>;
    var doesSdkShapeExist = shapeItems.Any(item => item.Metadata.Type == "FacebookSdk");
    if (!doesSdkShapeExist)
    {
        var setting = WorkContext.CurrentSite.As<ModuleSettingPart>();
        WorkContext.Layout.AfterBody.Add(New.FacebookSdk(Setting: setting), "1");
    }
}

@Html.React("CodesanookFacebookConnect.FacebookLogIn", new { returnUrlRelativeToRoot = Request.QueryString["returnUrl"] })